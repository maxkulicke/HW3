<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>


  <!-- where "generate" button is clicked -->
  <script>

    // TODO

    // four character strings
    var specialChars = "!#$%&'()*+,-./:;<=>?@[]^_`{|}~";
    var numericChars = "0123456789";
    var lowerChars = "abcdefghijklmnopqrstuvwxyz";
    var upperChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

    // object maker function

    // TO DO: TEST

    // generator function
    function generator(criteriaObject) {
      // will generate array from criteriaObject
      // will call stringMaker
      // will call randomizer
      // will return password

    }
    // TO DO: TEST

    // arrayMaker function
    function arrayMaker(criteriaObject) {

    }
    // TO DO: TEST

    // stringMaker function
    function stringMaker() {

    }
    // TO DO: TEST

    // randomizer function
    function randomizer(arr, charList) {
      var password = "";
      for (var i = 0; i < arr[0]; i++) {
        var nextChar = charList.charAt(Math.floor(charList.length * Math.random()));
        password = password.concat(nextChar);
      }
      // console.log(password);
      password = validator(arr, password);
      // console.log("randomizer password return = " + password);
      return password;
    }
    // TO DO: TEST

    // validator function
    // could this be more DRY? !!!!!
    // tricky little function
    // takes in the array of user inputs created by generator function
    // and the generated password from randomizer
    // and validates that it contains a character from each eligible
    // character list. if valid, it returns the input password,
    // if invalid, it calls randomizer again! in this way, randomizer
    // can be recursive!
    function validator(arr, password) {
      var valid = true;
      for (var i = 1; i < arr.length; i++) {
        if (arr[i]) {
          if (i === 1) {
            valid = contains(password, specialChars);
            if (!valid) {
              i = arr.length;
            }
          }
          else if (i === 2) {
            valid = contains(password, numericChars);
            if (!valid) {
              i = arr.length;
            }
          }
          else if (i === 3) {
            valid = contains(password, lowerChars);
            if (!valid) {
              i = arr.length;
            }
          }
          else if (i === 4) {
            valid = contains(password, upperChars);
            if (!valid) {
              i = arr.length;
            }
          }
        }
      }
      if (valid) {
        console.log("validator password return = " + password)
        return password;
      }
      else {
        return randomizer(arr, charList);
      }
    }
    // TO DO: TEST


    // contains function
    // checks to make sure password string (password) includes at least 
    // 1 character from character set (charString), returns boolean (valid)
    function contains(password, charString) {
      var valid = false;
      for (var i = 0; i < charString.length; i++) {
        valid = password.includes(charString.charAt(i));
        if (valid) {
          i = password.length;
        }
      }
      // console.log("contains boolean return = " + valid)
      return valid;
    }
    // TO DO: TEST

    // test
    console.log("test 1")
    var testArr1 = [30, true, true, false, true];
    var testCharList1 = "!#$%&'()*+,-./:;<=>?@[]^_`{|}~0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    var testPassword = randomizer(testArr1, testCharList1);
    console.log(testPassword);

    console.log("test 2")
    var testArr2 = [95, false, false, false, true];
    var testCharList2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    var testPassword = randomizer(testArr2, testCharList2);
    console.log(testPassword);

    console.log("test 3")
    var testArr3 = [120, true, true, true, true];
    var testCharList3 = "!#$%&'()*+,-./:;<=>?@[]^_`{|}~0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
    var testPassword = randomizer(testArr3, testCharList3);
    console.log(testPassword);

    console.log("test 4")
    var testArr4 = [12, true, true, true, true];
    var testCharList4 = "!#$%&'()*+,-./:;<=>?@[]^_`{|}~0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
    var testPassword = randomizer(testArr4, testCharList4);
    console.log(testPassword);



  </script>

</body>

</html>